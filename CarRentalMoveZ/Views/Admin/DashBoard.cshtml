@model CarRentalMoveZ.DTOs.DashboardDTO


@{
    ViewData["Title"] = "Dashboard";
    Layout = "~/Views/Shared/_AdminLayout.cshtml";
}



<!-- KPI CARDS -->
<div class="row g-3 mb-3">
    <div class="col-12 col-md-3">
        <div class="card p-3 kpi">
            <h6>Total Bookings</h6>
            <div class="d-flex align-items-center justify-content-between">
                <h3>@Model.TotalBookings</h3>
                <span class="chip-up"><i class="bi bi-arrow-up-right"></i> 11.2%</span>
            </div>
            <div class="muted small">from last week</div>
        </div>
    </div>

    <div class="col-12 col-md-3">
        <div class="card p-3 kpi">
            <h6>Total Revenue</h6>
            <div class="d-flex align-items-center justify-content-between">
                <h3>$@Model.TotalRevenue</h3>
                <span class="chip-up"><i class="bi bi-arrow-up-right"></i> 12.6%</span>
            </div>
            <div class="muted small">from last week</div>
        </div>
    </div>

    <div class="col-12 col-md-3">
        <div class="card p-3 kpi">
            <h6>Available Cars / Total Cars</h6>
            <div class="d-flex align-items-center justify-content-between">
                <h3>@Model.AvailableCars / @Model.TotalCars</h3>
                <span class="chip-dn"><i class="bi bi-arrow-down-right"></i> 2.8%</span>
            </div>
            <div class="muted small">from last week</div>
        </div>
    </div>

    <div class="col-12 col-md-3">
        <div class="card p-3 kpi">
            <h6>Total Customers</h6>
            <div class="d-flex align-items-center justify-content-between">
                <h3>@Model.TotalCustomers</h3>
                <span class="chip-up"><i class="bi bi-arrow-up-right"></i> 3.4%</span>
            </div>
            <div class="muted small">from last week</div>
        </div>
    </div>
</div>


<div class="row g-3">
    <!-- LEFT: charts + table -->
    <div class="col-12 col-lg-8">
        <!-- Earnings + Rent Status -->
        <div class="row g-3">
            <div class="col-12 col-xl-8">
                <div class="card p-3 h-100">
                    <div class="d-flex align-items-center justify-content-between">
                        <div>
                            <div class="fw-semibold">Earnings Summary</div>
                            <div class="small muted">Last 8 Months</div>
                        </div>
                        <span class="badge text-bg-light">Apr 2028 • $18,450</span>
                    </div>
                    <!-- Same fixed height -->
                    <div class="mt-2" style="height:300px;">
                        <canvas id="earningsChart"></canvas>
                    </div>
                </div>
            </div>

            <div class="col-12 col-xl-4">
                <div class="card p-3 h-100">
                    <div class="fw-semibold mb-2">Rent Status <span class="small text-muted">(This Week)</span></div>
                    <!-- Same fixed height -->
                    <div style="height:300px;">
                        <canvas id="rentStatusChart"></canvas>
                    </div>
                    <div class="mt-2 small">
                        <div class="d-flex justify-content-between"><span>Booked</span><span>58%</span></div>
                        <div class="d-flex justify-content-between"><span>Pending</span><span>24%</span></div>
                        <div class="d-flex justify-content-between"><span>Cancelled</span><span>18%</span></div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

@section Scripts {
    <script>
        /* Line: Earnings */
        new Chart(document.getElementById('earningsChart'), {
            type: 'line',
            data: {
                labels: ["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug"],
                datasets: [{
                    label: "Revenue",
                    data: [8000,11000,10000,18450,12000,15000,13000,14000],
                    borderColor: "#1E56A0",
                    backgroundColor: "rgba(30,86,160,.12)",
                    fill: true,
                    tension: .4,
                    pointRadius: 3
                }]
            },
            options: {
                maintainAspectRatio: false,
                plugins: { legend: { display: false } },
                scales: {
                    y: { grid: { color: "rgba(0,0,0,.05)" } },
                    x: { grid: { display: false } }
                }
            }
        });

        /* Doughnut: Rent Status */
        new Chart(document.getElementById('rentStatusChart'), {
            type: 'doughnut',
            data: {
                labels: ["Booked","Pending","Cancelled"],
                datasets: [{
                    data: [58,24,18],
                    backgroundColor: ["#1E56A0","#f59f00","#6c757d"]
                }]
            },
            options: {
                maintainAspectRatio: false,
                cutout: "65%",
                plugins: { legend: { position: "bottom" } }
            }
        });

  
    </script>
}
