@model IEnumerable<CarRentalMoveZ.DTOs.PaymentDTO>

@{
    Layout = "~/Views/Shared/_CustomerLayout.cshtml";
}

<div class="container py-4">
    <h2>My Payments</h2>

    <!-- Filter + Search controls -->
    <div class="d-flex justify-content-between align-items-center mb-3">
        <div>
            <label for="statusFilter" class="form-label me-2">Filter by Status:</label>
            <select id="statusFilter" class="form-select d-inline-block w-auto">
                <option value="ALL">All</option>
                <option value="Paid">Paid</option>
                <option value="Pending">Pending</option>
                <option value="Refunded">Refunded</option>
            </select>
        </div>

        <div class="d-flex">
            <input type="text" id="searchInput" class="form-control me-2" placeholder="Search payments...">
            <button type="button" class="btn btn-primary" onclick="filterTable()">Search</button>
        </div>
    </div>

    <!-- Payments Table -->
    <table class="table table-striped" id="paymentsTable">
        <thead>
            <tr>
                <th>Booking Dates</th>
                <th>Amount</th>
                <th>Payment Date</th>
                <th>Method</th>
                <th>Status</th>
            </tr>
        </thead>
        <tbody>
            @if (Model != null && Model.Any())
            {
                foreach (var payment in Model)
                {
                    <tr data-status="@payment.Status">
                        <td>@payment.BookingStartDate.ToString("MMM d, yyyy") – @payment.BookingEndDate.ToString("MMM d, yyyy")</td>
                        <td>@payment.Amount.ToString("C", System.Globalization.CultureInfo.CreateSpecificCulture("en-LK"))</td>
                        <td>@payment.PaymentDate.ToString("MMM d, yyyy")</td>
                        <td>@payment.PaymentMethod</td>
                        <td>@payment.Status</td>
                    </tr>
                }
            }
            else
            {
                <tr>
                    <td colspan="6" class="text-center text-muted">No payments found.</td>
                </tr>
            }
        </tbody>
    </table>
</div>


